# Makefile for Visual RAM Autonomous Memory System

CC = gcc
CFLAGS = -Wall -Wextra -std=c99 -g

# Targets disponibles (versions sans SDL2)
TARGETS = demo pixel_final simple_main complete_test

# Target principal - démonstration interactive pixels simulés
all: demo

# Démonstration interactive complète
demo: demo.c pixel_simulation.h
	$(CC) $(CFLAGS) -o demo demo.c

# Tests automatiques version pixels simulés
pixel_final: pixel_final.c pixel_simulation.h
	$(CC) $(CFLAGS) -o pixel_final pixel_final.c

# Version textuelle originale (simple)
simple_main: simple_main.c visual_ram_simple.h
	$(CC) $(CFLAGS) -o simple_main simple_main.c

# Tests complets version textuelle
complete_test: complete_test.c visual_ram_simple.h
	$(CC) $(CFLAGS) -o complete_test complete_test.c

# Clean build files
clean:
	rm -f $(TARGETS)

# Run targets
run-demo: demo
	./demo

run-pixel-tests: pixel_final  
	./pixel_final

run-simple: simple_main
	./simple_main

run-complete-tests: complete_test
	./complete_test

# Tests de validation complète
test-all: $(TARGETS)
	@echo "=== Tests de validation système mémoire visuelle ==="
	@echo "1. Tests complets version textuelle..."
	./complete_test
	@echo ""
	@echo "2. Tests pixels simulés..."
	./pixel_final
	@echo ""
	@echo "3. Tous les tests terminés avec succès!"

# Help target
help:
	@echo "Système de Mémoire Visuelle Autonome - Build System"
	@echo ""
	@echo "Targets:"
	@echo "  all              - Build démonstration interactive"
	@echo "  demo             - Build démonstration interactive pixels"
	@echo "  pixel_final      - Build tests automatiques pixels"
	@echo "  simple_main      - Build version textuelle simple"
	@echo "  complete_test    - Build tests complets textuels"
	@echo "  clean            - Remove build files"
	@echo "  test-all         - Run tous les tests de validation"
	@echo "  run-demo         - Run démonstration interactive"
	@echo "  run-pixel-tests  - Run tests pixels automatiques"
	@echo "  run-simple       - Run version textuelle simple"
	@echo "  run-complete-tests - Run tests textuels complets"
	@echo "  help             - Show this help message"
	@echo ""
	@echo "Usage Examples:"
	@echo "  make all           # Build démonstration principale"
	@echo "  make run-demo      # Run démonstration interactive"
	@echo "  make test-all      # Run tous les tests"

.PHONY: all clean demo pixel_final simple_main complete_test test-all run-demo run-pixel-tests run-simple run-complete-tests help